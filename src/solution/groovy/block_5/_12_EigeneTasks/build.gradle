package block_5._12_EigeneTasks

plugins {
    id 'groovy'
}

group = 'de.thm'
version = '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

/**
 * In dieser Übung erstellt ihr eigene Gradle-Tasks, um den Umgang
 * mit dem Gradle DSL (Groovy-basiert) praktisch zu üben.
 *
 * Testet eure Tasks mit:
 * ./gradlew greetWorkshop
 * ./gradlew createInfoFile
 * ./gradlew processNumbers
 *
 * Optional:
 * ./gradlew tasks
 * ./gradlew help --task <taskname>
 */

/**
 * Task 1 - Leicht: Begrüßungstask
 * Erstellt einen Task mit dem Namen: greetWorkshop
 * Anforderungen:
 *      - Gibt eine Begrüßung im Terminal aus
 *      - Nutzt mindestens einen GString
 *      - Hat group = "Workshop" und eine Beschreibung
 *
 * Beispielausgabe:
 * Willkommen zum Groovy-Gradle Workshop!
 * Projekt: <Projektname>
 */
tasks.register('greetWorkshop') {
    group = "Workshop"
    description = "Gibt eine Begrüßung für den Workshop aus"

    doLast {
        println "Willkommen zum Groovy-Gradle Workshop!"
        println "Projekt: $project.name"
        println "Version: $project.version"
    }
}

/**
 * Task 2 – Mittel: Dateierstellung
 * Erstellt einen Task: createInfoFile
 * Anforderungen:
 *      - Erstellt eine Datei block_bonus.gradle_aufgaben.build/info.txt
 *      - Schreibt folgende Infos hinein:
 *          - Projektname
 *          - Version
 *          - Aktuelles Datum
 *      - Nutzt Gradle/Groovy APIs zum Schreiben der Datei
 *      - Nutzt mindestens eine Variable im Text (GString)
 * Bonus (optional):
 * Task soll als UP-TO-DATE erkannt werden, wenn sich nichts ändert
 */
tasks.register('createInfoFile') {
    group = "Workshop"
    description = "Erstellt eine Info-Datei mit Projektmetadaten"

    doLast {
        def outputFile = file("$layout.buildDirectory/info.txt")

        outputFile.parentFile.mkdirs()

        def content = """
            Projekt: $project.name
            Version: $project.version
            Datum: ${new Date()}
            """

        outputFile.text = content
        println "Datei erstellt: $outputFile"
    }
}